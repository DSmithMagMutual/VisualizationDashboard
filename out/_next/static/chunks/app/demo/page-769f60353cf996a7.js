(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{2159:(e,r,t)=>{Promise.resolve().then(t.bind(t,6374))},3592:(e,r,t)=>{"use strict";t.d(r,{ak:()=>l});let o={"board-saveAdvice":"board-saveAdvice.json","board-savePDD":"board-savePDD.json"};async function l(e){try{let r=o[e];if(!r)return console.error("Unknown data source: ".concat(e)),null;let t=await fetch("/".concat(r));if(!t.ok)throw Error("Failed to load ".concat(r,": ").concat(t.statusText));return await t.json()}catch(r){return console.error("Error loading data source ".concat(e,":"),r),null}}},6374:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>F});var o=t(5155),l=t(2115),s=t(1218),a=t(6632),i=t(700),n=t(4581),d=t(3729),c=t(3127),x=t(1101),h=t(7262),f=t(4426),u=t(3731),b=t(8534),p=t(9816),g=t(7348),m=t(7744),y=t(804),A=t(7918),j=t(4572),v=t(5222),k=t(4128),W=t(6475),w=t(7857),C=t(9242),S=t(1239),I=t(3592);let D=[{key:"4.1",label:"2025 Iteration 4.1",range:"July 9 - July 22"},{key:"4.2",label:"2025 Iteration 4.2",range:"July 23 - August 5"},{key:"4.3",label:"2025 Iteration 4.3",range:"August 6 - August 19"},{key:"4.4",label:"2025 Iteration 4.4",range:"August 20 - September 2"},{key:"4.5IP",label:"2025 Iteration 4.5IP",range:"September 3 - September 16"},{key:"uncommitted",label:"Uncommitted",range:""}],E={"OG Team":"#6C63FF"},R={"To Do":"#dc3545","In Progress":"#fd7e14",Done:"#198754",Ready:"#6c757d","Ready for Release":"#6c757d",Creating:"#fd7e14",Validating:"#0d6efd",UAT:"#fd7e14",default:"#6c757d"};function M(e){let r=e.toLowerCase();return r.includes("done")||r.includes("complete")||r.includes("closed")||r.includes("resolved")?"Done":r.includes("progress")||r.includes("creating")||r.includes("uat")||r.includes("validating")||r.includes("testing")||r.includes("review")||r.includes("development")||r.includes("in development")?"In Progress":r.includes("ready")||r.includes("to do")||r.includes("open")||r.includes("new")||r.includes("backlog")||r.includes("selected for development")||r.includes("ready for development")?"To Do":"To Do"}function O(e){if(!e)return"#6c757d";if(E[e])return E[e];let r=0;for(let t=0;t<e.length;t++)r=e.charCodeAt(t)+((r<<5)-r);let t=(0xffffff&r).toString(16).toUpperCase();return"#"+"00000".substring(0,6-t.length)+t}function T(e){let{columns:r}=e,t=["To Do","In Progress","Done"],l=D.map(e=>{let t=r[e.key]||[],o={"To Do":0,"In Progress":0,Done:0};return t.forEach(e=>{if(e.stories&&e.stories.length>0)e.stories.forEach(e=>{let r=M(e.status);o.hasOwnProperty(r)&&o[r]++});else{let r=M(e.status);o.hasOwnProperty(r)&&o[r]++}}),{iteration:e.label,key:e.key,"To Do":o["To Do"],"In Progress":o["In Progress"],Done:o.Done}}),d=l.map(e=>e.iteration),c=t.map(e=>({data:l.map(r=>r[e]),color:R[e]||R.default}));return(0,o.jsx)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,mb:4,maxWidth:"50%",mx:"auto"},children:(0,o.jsxs)(a.A,{sx:{p:3},children:[(0,o.jsx)(i.A,{variant:"h6",fontWeight:600,sx:{color:"#212529",mb:3},children:"Child Stories Status Distribution by Iteration"}),(0,o.jsx)(n.A,{sx:{mb:3,height:400},children:(0,o.jsx)(S.E,{xAxis:[{data:d,scaleType:"band",categoryGapRatio:.3,barGapRatio:.1,label:"Iterations",tickLabelPlacement:"middle"}],yAxis:[{label:"Number of Stories"}],series:c,height:350,barLabel:e=>{var r;return(null==(r=e.value)?void 0:r.toString())||""},margin:{left:80,right:20,top:20,bottom:80},sx:{"& .MuiChartsBar-label":{fill:"#212529",fontSize:"0.75rem",fontWeight:600}}})}),(0,o.jsxs)(n.A,{sx:{bgcolor:"#f8f9fa",borderRadius:1,p:2,border:"1px solid #e9ecef"},children:[(0,o.jsx)(i.A,{variant:"subtitle2",sx:{color:"#212529",fontWeight:600,mb:2},children:"Summary by Status (Child Stories)"}),(0,o.jsxs)(n.A,{sx:{display:"flex",gap:4,flexWrap:"wrap"},children:[t.map(e=>{let r=l.reduce((r,t)=>r+t[e],0);return(0,o.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(n.A,{sx:{width:12,height:12,borderRadius:.5,bgcolor:R[e]||R.default}}),(0,o.jsxs)(i.A,{variant:"body2",sx:{color:"#212529",fontWeight:500},children:[e,": ",r]})]},e)}),(0,o.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,ml:"auto"},children:(0,o.jsxs)(i.A,{variant:"body2",sx:{color:"#212529",fontWeight:600},children:["Total: ",l.reduce((e,r)=>e+r["To Do"]+r["In Progress"]+r.Done,0)]})})]})]})]})})}function B(e){let{columns:r}=e,t=(()=>{let e=new Set,t=new Set,o={};Object.entries(r).forEach(r=>{let[l,s]=r;s.forEach(r=>{r.stories&&r.stories.length>0&&r.stories.forEach(s=>{let a=s.team||r.team||"Other",i=s.status||"Unknown";e.add(a),t.add(i),o[l]||(o[l]={}),o[l][a]||(o[l][a]={}),o[l][a][i]||(o[l][a][i]=[]);let n=Math.floor(30*Math.random())+1;o[l][a][i].push(n)})})});let l={};Object.entries(o).forEach(e=>{let[r,t]=e;Object.entries(t).forEach(e=>{let[r,t]=e;l[r]||(l[r]={}),Object.entries(t).forEach(e=>{let[t,o]=e;if(o.length>0){let e=o.reduce((e,r)=>e+r,0)/o.length;l[r][t]||(l[r][t]=0),l[r][t]=(l[r][t]+e)/2}})})});let s=[];return Object.entries(l).forEach(e=>{let[r,t]=e;s.push({team:r,done:Math.round(10*(t.Done||0))/10,creating:Math.round(10*(t.Creating||0))/10,validating:Math.round(10*(t.Validating||0))/10,ready:Math.round(10*(t.Ready||0))/10})}),s})();Array.from(new Set(t.map(e=>e.team)));let l=e=>O(e);return(0,o.jsx)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,mb:4,maxWidth:"50%",mx:"auto"},children:(0,o.jsxs)(a.A,{sx:{p:3},children:[(0,o.jsx)(i.A,{variant:"h6",fontWeight:600,sx:{color:"#212529",mb:3},children:"Flow Time by Team and Status"}),(0,o.jsx)(n.A,{sx:{overflowX:"auto"},children:(0,o.jsxs)(n.A,{sx:{display:"table",width:"100%",borderCollapse:"collapse",border:"1px solid #dee2e6"},children:[(0,o.jsxs)(n.A,{sx:{display:"table-row",bgcolor:"#f8f9fa"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,color:"#212529"},children:"Team"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,textAlign:"center",color:"#212529"},children:"Done"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,textAlign:"center",color:"#212529"},children:"Creating"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,textAlign:"center",color:"#212529"},children:"Validating"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,textAlign:"center",color:"#212529"},children:"Ready"})]}),t.map((e,r)=>(0,o.jsxs)(n.A,{sx:{display:"table-row"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",color:"#212529"},children:(0,o.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,o.jsx)(n.A,{sx:{width:16,height:16,borderRadius:"50%",bgcolor:l(e.team)}}),e.team]})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",color:"#212529"},children:(0,o.jsx)(i.A,{sx:{color:R.Done,fontWeight:500},children:isNaN(e.done)?0:e.done})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",color:"#212529"},children:(0,o.jsx)(i.A,{sx:{color:R.Creating,fontWeight:500},children:isNaN(e.creating)?0:e.creating})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",color:"#212529"},children:(0,o.jsx)(i.A,{sx:{color:R.Validating,fontWeight:500},children:isNaN(e.validating)?0:e.validating})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",color:"#212529"},children:(0,o.jsx)(i.A,{sx:{color:R.Ready,fontWeight:500},children:isNaN(e.ready)?0:e.ready})})]},r)),(0,o.jsxs)(n.A,{sx:{display:"table-row",bgcolor:"#f8f9fa"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",fontWeight:600,color:"#212529"},children:"Total (Time in Status - Average - Days)"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",fontWeight:600},children:(0,o.jsx)(i.A,{sx:{color:R.Done},children:t.length>0?(()=>{let e=t.reduce((e,r)=>e+(isNaN(r.done)?0:r.done),0)/t.length;return isNaN(e)?0:Math.round(10*e)/10})():0})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",fontWeight:600},children:(0,o.jsx)(i.A,{sx:{color:R.Creating},children:t.length>0?(()=>{let e=t.reduce((e,r)=>e+(isNaN(r.creating)?0:r.creating),0)/t.length;return isNaN(e)?0:Math.round(10*e)/10})():0})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",fontWeight:600},children:(0,o.jsx)(i.A,{sx:{color:R.Validating},children:t.length>0?(()=>{let e=t.reduce((e,r)=>e+(isNaN(r.validating)?0:r.validating),0)/t.length;return isNaN(e)?0:Math.round(10*e)/10})():0})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:2,border:"1px solid #dee2e6",textAlign:"center",fontWeight:600},children:(0,o.jsx)(i.A,{sx:{color:R.Ready},children:t.length>0?(()=>{let e=t.reduce((e,r)=>e+(isNaN(r.ready)?0:r.ready),0)/t.length;return isNaN(e)?0:Math.round(10*e)/10})():0})})]})]})})]})})}function N(e){let{card:r,onDelete:t,onReload:f,isMinimized:u,onToggleMinimize:b,teamFilter:p}=e,g=l.useMemo(()=>Array.isArray(r.stories)?p&&0!==p.length?r.stories.filter(e=>p.includes(e.team)):r.stories:[],[r.stories,p]),m=g.filter(e=>"done"===e.statusCategory).length||0,y=g.length||0,A=y>0?Math.round(m/y*100):0,j=r.team||"Other";return(0,o.jsxs)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,mb:2,position:"relative"},children:[(0,o.jsxs)(n.A,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:.5,zIndex:1},children:[(0,o.jsx)(d.A,{title:u?"Expand card":"Minimize card",children:(0,o.jsx)(c.A,{size:"small",onClick:b,sx:{color:"#6c757d",bgcolor:"rgba(108, 117, 125, 0.1)",borderRadius:1,"&:hover":{bgcolor:"rgba(108, 117, 125, 0.2)"}},children:u?(0,o.jsx)(k.A,{fontSize:"small"}):(0,o.jsx)(W.A,{fontSize:"small"})})}),(0,o.jsx)(d.A,{title:"Refresh card data",children:(0,o.jsx)(c.A,{size:"small",onClick:f,sx:{color:"#0d6efd",bgcolor:"rgba(13, 110, 253, 0.1)",borderRadius:1,"&:hover":{bgcolor:"rgba(13, 110, 253, 0.2)"}},children:(0,o.jsx)(w.A,{fontSize:"small"})})}),(0,o.jsx)(d.A,{title:"Remove card",children:(0,o.jsx)(c.A,{size:"small",onClick:t,sx:{color:"#dc3545",bgcolor:"rgba(220, 53, 69, 0.1)",borderRadius:1,"&:hover":{bgcolor:"rgba(220, 53, 69, 0.2)"}},children:(0,o.jsx)(C.A,{fontSize:"small"})})})]}),(0,o.jsxs)(a.A,{sx:{p:2,pr:u?8:6},children:[(0,o.jsx)(n.A,{display:"flex",alignItems:"center",gap:1,mb:1,children:(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{color:"#0d6efd",flex:1,minWidth:0},children:r.key?(0,o.jsx)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",style:{color:"#0d6efd",textDecoration:"none",fontWeight:600},children:r.key}):r.name})}),(0,o.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,mb:1,sx:{flexWrap:"wrap"},children:[(0,o.jsx)(d.A,{title:j,placement:"top",children:(0,o.jsx)("span",{style:{display:"inline-block",width:16,height:16,borderRadius:"50%",background:O(j),border:"1.5px solid #fff",boxShadow:"0 0 0 1px #dee2e6",flexShrink:0}})}),(0,o.jsx)(i.A,{variant:"caption",sx:{color:"#212529",fontWeight:500,flexShrink:0},children:j})]}),(0,o.jsx)(n.A,{display:"flex",alignItems:"center",gap:1,mb:1,children:(0,o.jsx)(x.A,{label:r.status,size:"small",sx:{bgcolor:"#f3f4f6",color:"#212529",fontWeight:500,borderRadius:1}})}),(0,o.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,o.jsxs)(i.A,{variant:"body2",sx:{fontSize:"0.75rem",color:"#495057",fontWeight:500},children:[m,"/",y]}),(0,o.jsx)("span",{style:{color:100===A?"#198754":A>0?"#fd7e14":"#dc3545",fontSize:18,verticalAlign:"middle"},children:100===A?"✔️":A>0?"⏳":"⚠️"}),(0,o.jsxs)(i.A,{variant:"body2",fontWeight:600,sx:{color:100===A?"#198754":A>0?"#fd7e14":"#dc3545",fontSize:"0.875rem"},children:[A,"%"]})]}),(0,o.jsx)(h.A,{variant:"determinate",value:A,sx:{height:8,borderRadius:1,background:"#e9ecef","& .MuiLinearProgress-bar":{background:100===A?"#198754":A>0?"#fd7e14":"#dc3545"}}}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.A,{variant:"body2",sx:{color:"#495057",fontSize:"0.95em",mb:1,mt:1},children:r.summary||"Card subtitle or description"}),g&&g.length>0&&(0,o.jsxs)(n.A,{mt:2,children:[(0,o.jsx)(i.A,{variant:"subtitle2",sx:{color:"#212529",fontWeight:600,mb:1},children:"Child work items"}),(0,o.jsx)(n.A,{component:"ul",sx:{pl:2,m:0},children:g.map(e=>(0,o.jsxs)("li",{style:{marginBottom:4},children:[(0,o.jsx)("a",{href:"https://magmutual.atlassian.net/browse/"+e.key,target:"_blank",rel:"noopener noreferrer",style:{fontWeight:600,color:"#0d6efd",marginRight:8,textDecoration:"none"},children:e.key}),(0,o.jsx)("span",{style:{color:"#495057",marginRight:8},children:e.summary}),(0,o.jsx)(d.A,{title:e.team,placement:"top",children:(0,o.jsx)("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:O(e.team),border:"1px solid #fff",boxShadow:"0 0 0 1px #dee2e6",marginRight:4}})}),(0,o.jsx)(x.A,{label:e.status,size:"small",sx:{bgcolor:"#f3f4f6",color:"#212529",fontWeight:500,borderRadius:1}})]},e.key))})]})]})]})]})}async function P(e,r){await fetch("/api/board-save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({columns:e,title:r})})}async function z(){try{let e=await fetch("/api/board-save");if(e.ok)return await e.json()||null}catch(e){console.error("Error loading board state:",e)}return null}async function L(e){var r,t,o,l,s,a,i;let n=await fetch("/api/jira?endpoint=issue/".concat(e));if(!n.ok)return null;let d=await n.json();if(!d||!d.key)return null;let c=encodeURIComponent("parent=".concat(e)),x=await fetch("/api/jira?endpoint=search&jql=".concat(c,"&fields=key,summary,status,issuetype,customfield_10001")),h=[];x.ok&&(h=((await x.json()).issues||[]).map(e=>{let r="Other",t=e.fields.customfield_10001;return"object"==typeof t&&(null==t?void 0:t.name)?r=t.name:"string"==typeof t&&t&&(r=t),{key:e.key,summary:e.fields.summary,status:e.fields.status.name,statusCategory:e.fields.status.statusCategory.key,team:r}}));let f="Other",u=null==(r=d.fields)?void 0:r.customfield_10001;return"object"==typeof u&&(null==u?void 0:u.name)?f=u.name:"string"==typeof u&&u&&(f=u),{key:d.key,url:"https://magmutual.atlassian.net/browse/"+d.key,summary:null==(t=d.fields)?void 0:t.summary,status:null==(l=d.fields)||null==(o=l.status)?void 0:o.name,statusCategory:null==(i=d.fields)||null==(a=i.status)||null==(s=a.statusCategory)?void 0:s.key,stories:h,team:f}}function F(){let[e,r]=(0,l.useState)(""),[t,a]=(0,l.useState)(()=>D.reduce((e,r)=>(e[r.key]=[],e),{})),[d,c]=(0,l.useState)(()=>D.reduce((e,r)=>(e[r.key]="",e),{})),[x,k]=(0,l.useState)(null),[W,C]=(0,l.useState)(!0),[E,R]=(0,l.useState)(new Set),[F,_]=(0,l.useState)("Demo Iteration Board"),[V,U]=(0,l.useState)(!1),[J,K]=(0,l.useState)([]),X=l.useMemo(()=>{let e=new Set;return Object.values(t).forEach(r=>{r.forEach(r=>{r.team&&e.add(r.team),Array.isArray(r.stories)&&r.stories.forEach(r=>{r.team&&e.add(r.team)})})}),Array.from(e).sort()},[t]);function H(e){return!!(0===J.length||e.team&&J.includes(e.team))||!!Array.isArray(e.stories)&&e.stories.some(e=>J.includes(e.team))}let G=async e=>{try{C(!0);let r=await (0,I.ak)(e);if(r&&r.columns){let t=D.reduce((e,t)=>{var o;return e[t.key]=(null==(o=r.columns)?void 0:o[t.key])||[],e},{});a(t),_("Demo Iteration Board - ".concat(e))}}catch(e){console.error("Failed to load data source:",e)}finally{C(!1)}};(0,l.useEffect)(()=>{e&&G(e)},[e]),(0,l.useEffect)(()=>{(async()=>{try{C(!0);let e=await z();if(e){e.title&&_(e.title);let r=D.reduce((r,t)=>{var o;return r[t.key]=(null==(o=e.columns)?void 0:o[t.key])||[],r},{});a(r)}}catch(e){console.error("Error loading saved board state:",e)}finally{C(!1)}})()},[]);let q=async e=>{let r=d[e].trim();if(!r)return;if(k(null),Object.values(t).flat().find(e=>e.key===r))return void k("Card '".concat(r,"' already exists on the board."));let o=await L(r);if(!o)return void k("Jira issue '".concat(r,"' not found."));let l={...t,[e]:[...t[e],o]};a(l),c(r=>({...r,[e]:""})),await P(l,F)},Q=async(e,r)=>{let o=t[e][r],l="".concat(e,"-").concat(o.key,"-").concat(r),s={...t,[e]:t[e].filter((e,t)=>t!==r)};a(s),R(e=>{let r=new Set(e);return r.delete(l),r}),await P(s,F)},Y=async(e,r)=>{let o=t[e][r];if(!o.key)return;k(null);let l=await L(o.key);if(!l)return void k("Failed to reload data for '".concat(o.key,"'."));let s={...t,[e]:t[e].map((e,t)=>t===r?l:e)};a(s),await P(s,F)},Z=async()=>{k(null);let e=0,r=0,o=[],l=[];if(D.forEach(e=>{(t[e.key]||[]).forEach((r,t)=>{r.key&&l.push({colKey:e.key,cardIndex:t,cardKey:r.key})})}),0===l.length)return void k("No cards to refresh.");for(let{colKey:s,cardIndex:i,cardKey:n}of l)try{let l=await L(n);if(l){let r={...t,[s]:t[s].map((e,r)=>r===i?l:e)};a(r),e++}else r++,o.push("Failed to reload data for '".concat(n,"'"))}catch(e){r++,o.push("Error reloading '".concat(n,"': ").concat(e instanceof Error?e.message:"Unknown error"))}await P(t,F),r>0?k("Refreshed ".concat(e," cards successfully. ").concat(r," cards failed: ").concat(o.slice(0,3).join(", ")).concat(o.length>3?"...":"")):k(null)},$=(e,r)=>{let o=t[e][r],l="".concat(e,"-").concat(o.key,"-").concat(r);R(e=>{let r=new Set(e);return r.has(l)?r.delete(l):r.add(l),r})},ee=async e=>{_(e),U(!1),await P(t,e)};return W?(0,o.jsx)(n.A,{sx:{background:"#f8f9fa",minHeight:"100vh",p:4,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsxs)(n.A,{sx:{textAlign:"center"},children:[(0,o.jsx)(f.A,{sx:{color:"#0d6efd",mb:2},size:40}),(0,o.jsx)(i.A,{variant:"body1",sx:{color:"#212529",fontWeight:600},children:"Loading saved board state..."})]})}):(0,o.jsxs)(n.A,{sx:{background:"#f8f9fa",minHeight:"100vh",p:4},children:[(0,o.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,o.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:V?(0,o.jsx)(u.A,{value:F,onChange:e=>_(e.target.value),onBlur:()=>ee(F),onKeyDown:e=>{"Enter"===e.key?ee(F):"Escape"===e.key&&U(!1)},variant:"standard",sx:{"& .MuiInput-root":{fontSize:"2rem",fontWeight:700,color:"#212529","&:before":{borderBottom:"none"},"&:after":{borderBottom:"none"},"&:hover:before":{borderBottom:"none"}}},autoFocus:!0}):(0,o.jsx)(i.A,{variant:"h4",fontWeight:700,sx:{color:"#212529",cursor:"pointer","&:hover":{textDecoration:"underline",textDecorationColor:"#0d6efd"}},onClick:()=>U(!0),children:F})}),(0,o.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,o.jsx)(b.A,{variant:"outlined",size:"small",onClick:()=>R(new Set),sx:{color:"#0d6efd",borderColor:"#0d6efd",fontWeight:500,borderRadius:1,"&:hover":{backgroundColor:"#0d6efd",color:"#ffffff",borderColor:"#0d6efd"}},children:"Expand All"}),(0,o.jsx)(b.A,{variant:"outlined",size:"small",onClick:()=>{let e=new Set;Object.entries(t).forEach(r=>{let[t,o]=r;o.forEach((r,o)=>{e.add("".concat(t,"-").concat(r.key,"-").concat(o))})}),R(e)},sx:{color:"#6c757d",borderColor:"#6c757d",fontWeight:500,borderRadius:1,"&:hover":{backgroundColor:"#6c757d",color:"#ffffff",borderColor:"#6c757d"}},children:"Minimize All"})]})]}),(0,o.jsxs)(n.A,{sx:{display:"flex",gap:3,flexWrap:"wrap",mb:3,alignItems:"flex-end"},children:[(0,o.jsx)(n.A,{sx:{minWidth:250},children:(0,o.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,o.jsx)(g.A,{id:"data-source-label",sx:{color:"#495057",fontWeight:500,"&.Mui-focused":{color:"#0d6efd"},"&.MuiInputLabel-shrink":{color:"#0d6efd"}},children:"Data Source"}),(0,o.jsxs)(m.A,{labelId:"data-source-label",value:e,label:"Data Source",onChange:e=>r(e.target.value),sx:{backgroundColor:"#ffffff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#dee2e6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#adb5bd"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#0d6efd"},"& .MuiInputLabel-root.Mui-focused":{color:"#0d6efd"}},children:[(0,o.jsx)(y.A,{value:"board-saveAdvice",children:"Board Save Advice (ADVICE)"}),(0,o.jsx)(y.A,{value:"board-savePDD",children:"Board Save PDD"})]})]})}),(0,o.jsx)(n.A,{sx:{minWidth:300},children:(0,o.jsxs)(p.A,{fullWidth:!0,size:"small",children:[(0,o.jsx)(g.A,{id:"team-filter-label",sx:{color:"#495057",fontWeight:500,"&.Mui-focused":{color:"#0d6efd"},"&.MuiInputLabel-shrink":{color:"#0d6efd"}},children:"Filter by Team"}),(0,o.jsx)(m.A,{labelId:"team-filter-label",multiple:!0,value:J,onChange:e=>K("string"==typeof e.target.value?e.target.value.split(","):e.target.value),input:(0,o.jsx)(A.A,{label:"Filter by Team"}),renderValue:e=>0===e.length?"All Teams":e.join(", "),sx:{backgroundColor:"#ffffff","& .MuiOutlinedInput-notchedOutline":{borderColor:"#dee2e6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#adb5bd"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#0d6efd"},"& .MuiInputLabel-root.Mui-focused":{color:"#0d6efd"}},children:X.map(e=>(0,o.jsxs)(y.A,{value:e,children:[(0,o.jsx)(j.A,{checked:J.indexOf(e)>-1,style:{color:O(e)}}),(0,o.jsx)(v.A,{primary:e})]},e))})]})}),(0,o.jsx)(n.A,{children:(0,o.jsx)(b.A,{variant:"outlined",size:"small",color:"primary",onClick:Z,startIcon:(0,o.jsx)(w.A,{}),sx:{fontWeight:600,borderRadius:1,borderColor:"#0d6efd",color:"#0d6efd","&:hover":{borderColor:"#0b5ed7",backgroundColor:"rgba(13, 110, 253, 0.04)"}},children:"Refresh All Cards"})})]}),(0,o.jsx)(n.A,{sx:{mb:4,maxWidth:600,bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,p:3},children:(()=>{let e=Object.values(t).flat().flatMap(e=>e.stories?J&&0!==J.length?e.stories.filter(e=>J.includes(e.team)):e.stories:[]),r=e.length,l=e.filter(e=>"Done"===M(e.status)).length,s=e.filter(e=>"In Progress"===M(e.status)).length,a=e.filter(e=>"To Do"===M(e.status)).length,d=r>0?Math.round(l/r*100):0,c="#e9ecef";100===d&&r>0?c="#198754":d>0?c="#fd7e14":r>0&&(c="#dc3545");let x="On Track";return d<50?x="Behind":d<80&&(x="At Risk"),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.A,{variant:"h6",fontWeight:700,sx:{color:"#212529",mb:2},children:"PI Status Summary"}),(0,o.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,o.jsx)(n.A,{flex:1,children:(0,o.jsx)(h.A,{variant:"determinate",value:d,sx:{height:12,borderRadius:1,background:"#e9ecef","& .MuiLinearProgress-bar":{background:c}}})}),(0,o.jsxs)(i.A,{variant:"h6",fontWeight:700,sx:{color:c,minWidth:72,textAlign:"right"},children:[d,"% Done"]})]}),(0,o.jsxs)(n.A,{display:"flex",gap:4,mb:2,children:[(0,o.jsxs)(i.A,{variant:"body1",sx:{color:"#212529"},children:["Total: ",(0,o.jsx)("b",{children:r})]}),(0,o.jsxs)(i.A,{variant:"body1",sx:{color:"#198754"},children:["Done: ",(0,o.jsx)("b",{children:l})]}),(0,o.jsxs)(i.A,{variant:"body1",sx:{color:"#fd7e14"},children:["In Progress: ",(0,o.jsx)("b",{children:s})]}),(0,o.jsxs)(i.A,{variant:"body1",sx:{color:"#6c757d"},children:["Not Started: ",(0,o.jsx)("b",{children:a})]})]}),(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{color:c},children:x})]})})()}),x&&(0,o.jsx)(i.A,{color:"error",sx:{mb:2},children:x}),(0,o.jsx)(n.A,{sx:{display:"flex",gap:3,overflowX:"auto",minWidth:1200},children:D.map(e=>(0,o.jsxs)(n.A,{sx:{minWidth:320,background:"#fff",border:"1px solid #e9ecef",borderRadius:1,p:2,display:"flex",flexDirection:"column",minHeight:600},children:[(0,o.jsxs)(n.A,{mb:2,children:[(0,o.jsx)(i.A,{variant:"h6",fontWeight:600,sx:{color:"#212529"},children:e.label}),(0,o.jsx)(i.A,{variant:"caption",sx:{color:"#6c757d"},children:e.range})]}),(()=>{let r=(t[e.key]||[]).flatMap(e=>e.stories||[]),l=r.length,s=r.filter(e=>"Done"===M(e.status)).length,a=l>0?Math.round(s/l*100):0,d="#e9ecef";return 100===a&&l>0?d="#198754":a>0?d="#fd7e14":l>0&&(d="#dc3545"),(0,o.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,o.jsx)(n.A,{flex:1,children:(0,o.jsx)(h.A,{variant:"determinate",value:a,sx:{height:8,borderRadius:1,background:"#e9ecef","& .MuiLinearProgress-bar":{background:d}}})}),(0,o.jsxs)(i.A,{variant:"body2",fontWeight:600,sx:{color:d,minWidth:56,textAlign:"right"},children:[a,"% Done"]})]})})(),(0,o.jsx)(n.A,{flex:1,mb:2,children:t[e.key].filter(H).map((r,t)=>{let l="".concat(e.key,"-").concat(r.key,"-").concat(t),s=E.has(l);return(0,o.jsx)(N,{card:r,onDelete:()=>Q(e.key,t),onReload:()=>Y(e.key,t),isMinimized:s,onToggleMinimize:()=>$(e.key,t),teamFilter:J},t)})}),(0,o.jsxs)(n.A,{mt:"auto",pt:2,children:[(0,o.jsx)(u.A,{variant:"outlined",size:"small",fullWidth:!0,placeholder:"Add card (Jira key)...",value:d[e.key],onChange:r=>c(t=>({...t,[e.key]:r.target.value})),onKeyDown:r=>{"Enter"===r.key&&q(e.key)},sx:{mb:1,background:"#fff",borderRadius:1},inputProps:{style:{color:"#212529"}}}),(0,o.jsx)(b.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>q(e.key),sx:{fontWeight:600,borderRadius:1},children:"Add"})]})]},e.key))}),(0,o.jsx)(T,{columns:t}),(0,o.jsx)(B,{columns:t}),(0,o.jsxs)(n.A,{sx:{mt:6},children:[(0,o.jsx)(i.A,{variant:"h5",fontWeight:700,sx:{mb:3,color:"#212529"},children:"Team Insights"}),(0,o.jsxs)(n.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:4},children:[(0,o.jsxs)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,p:3,mb:4},children:[(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{mb:2,color:"#212529"},children:"Team Throughput Trend"}),(0,o.jsx)(S.E,{xAxis:[{data:D.map(e=>e.label),scaleType:"band",label:"Iteration"}],yAxis:[{label:"Completed Stories"}],series:(()=>{let e=new Set;return D.forEach(r=>{(t[r.key]||[]).forEach(r=>{(r.stories||[]).forEach(r=>{r.team&&e.add(r.team)})})}),Array.from(e).map(e=>({label:e,data:D.map(r=>{let o=0;return(t[r.key]||[]).forEach(r=>{(r.stories||[]).forEach(r=>{r.team===e&&"Done"===M(r.status)&&o++})}),o}),color:O(e)}))})(),height:250,sx:{maxWidth:"100%",bgcolor:"#fff",borderRadius:1,border:"1px solid #dee2e6",p:1,"& .MuiChartsAxis-tickLabel, & .MuiChartsAxis-label, & .MuiChartsLegend-root, & .MuiChartsBar-label":{color:"#212529",fill:"#212529",fontWeight:600}}})]}),(0,o.jsxs)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,p:3,mb:4},children:[(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{mb:2,color:"#212529"},children:"Bottleneck Status Heatmap"}),(()=>{let e=["Ready","Creating","Validating","Done"],r=new Set;D.forEach(e=>{(t[e.key]||[]).forEach(e=>{(e.stories||[]).forEach(e=>{e.team&&r.add(e.team)})})});let l=Array.from(r),s=l.map(r=>e.map(e=>{let o=0;return D.forEach(l=>{(t[l.key]||[]).forEach(t=>{(t.stories||[]).forEach(t=>{t.team===r&&M(t.status)===e&&o++})})}),o}));return(0,o.jsx)(n.A,{sx:{overflowX:"auto",borderRadius:1,border:"1px solid #dee2e6",bgcolor:"#f8f9fa",mt:1},children:(0,o.jsxs)(n.A,{sx:{display:"table",width:"100%",borderCollapse:"collapse"},children:[(0,o.jsxs)(n.A,{sx:{display:"table-row"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529"}}),e.map(e=>(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:e},e))]}),l.map((r,t)=>(0,o.jsxs)(n.A,{sx:{display:"table-row","&:hover":{bgcolor:"#f3f4f6"}},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:O(r),borderBottom:"1px solid #dee2e6"},children:r}),s[t].map((r,t)=>(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,textAlign:"center",color:"#212529",bgcolor:r>0?"#ffe5e5":"#fff",fontWeight:600,borderBottom:"1px solid #dee2e6"},children:r},e[t]))]},r))]})})})()]}),(0,o.jsxs)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,p:3,mb:4},children:[(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{mb:2,color:"#212529"},children:"Aging Work Items"}),(()=>{let e={};return D.forEach(r=>{(t[r.key]||[]).forEach(r=>{(r.stories||[]).forEach(r=>{e[r.team]||(e[r.team]=[]),"Done"!==M(r.status)&&e[r.team].push({...r,daysOpen:Math.floor(30*Math.random())+1})})})}),(0,o.jsx)(n.A,{sx:{overflowX:"auto",borderRadius:1,border:"1px solid #dee2e6",bgcolor:"#f8f9fa",mt:1},children:(0,o.jsxs)(n.A,{sx:{display:"table",width:"100%",borderCollapse:"collapse"},children:[(0,o.jsxs)(n.A,{sx:{display:"table-row",bgcolor:"#f3f4f6"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Team"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Key"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Summary"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Status"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Days Open"})]}),Object.entries(e).map(e=>{let[r,t]=e;return t.sort((e,r)=>r.daysOpen-e.daysOpen).slice(0,2).map(e=>(0,o.jsxs)(n.A,{sx:{display:"table-row","&:hover":{bgcolor:"#f3f4f6"}},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:O(r),fontWeight:600,borderBottom:"1px solid #dee2e6"},children:r}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,borderBottom:"1px solid #dee2e6"},children:(0,o.jsx)("a",{href:"https://magmutual.atlassian.net/browse/"+e.key,target:"_blank",rel:"noopener noreferrer",style:{color:"#0d6efd",fontWeight:600},children:e.key})}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:"#212529",borderBottom:"1px solid #dee2e6"},children:e.summary}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:"#212529",borderBottom:"1px solid #dee2e6"},children:e.status}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:e.daysOpen>14?"#dc3545":"#212529",fontWeight:600,borderBottom:"1px solid #dee2e6"},children:e.daysOpen})]},e.key))})]})})})()]}),(0,o.jsxs)(s.A,{sx:{bgcolor:"#fff",border:"1px solid #dee2e6",borderRadius:1,boxShadow:1,p:3,mb:4},children:[(0,o.jsx)(i.A,{variant:"subtitle1",fontWeight:600,sx:{mb:2,color:"#212529"},children:"WIP (Work In Progress) Limits"}),(()=>{let e={};return D.forEach(r=>{(t[r.key]||[]).forEach(r=>{(r.stories||[]).forEach(r=>{e[r.team]||(e[r.team]=0),"In Progress"===M(r.status)&&e[r.team]++})})}),(0,o.jsx)(n.A,{sx:{overflowX:"auto",borderRadius:1,border:"1px solid #dee2e6",bgcolor:"#f8f9fa",mt:1},children:(0,o.jsxs)(n.A,{sx:{display:"table",width:"100%",borderCollapse:"collapse"},children:[(0,o.jsxs)(n.A,{sx:{display:"table-row",bgcolor:"#f3f4f6"},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Team"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"In Progress"}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,fontWeight:600,color:"#212529",borderBottom:"1px solid #dee2e6"},children:"Limit"})]}),Object.entries(e).map(e=>{let[r,t]=e;return(0,o.jsxs)(n.A,{sx:{display:"table-row","&:hover":{bgcolor:"#f3f4f6"}},children:[(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:O(r),fontWeight:600,borderBottom:"1px solid #dee2e6"},children:r}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:t>5?"#dc3545":"#212529",fontWeight:600,borderBottom:"1px solid #dee2e6"},children:t}),(0,o.jsx)(n.A,{sx:{display:"table-cell",p:1,color:"#212529",borderBottom:"1px solid #dee2e6"},children:5})]},r)})]})})})()]})]})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[935,476,710,687,434,230,441,684,358],()=>r(2159)),_N_E=e.O()}]);