<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Jira Dashboard - Complete Standalone Version" />
    <title>Jira Dashboard</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚛️</text></svg>" />
    
    <!-- Material-UI CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #181C24;
            color: #fff;
            line-height: 1.6;
        }
        
        .header {
            background-color: #1e1e1e;
            border-bottom: 1px solid #333;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            color: #6C63FF;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .nav {
            display: flex;
            gap: 1rem;
        }
        
        .nav button {
            background: none;
            border: none;
            color: #fff;
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .nav button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .nav button.active {
            background-color: #6C63FF;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .column {
            background-color: #23293A;
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 500px;
        }
        
        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #333;
        }
        
        .column-title {
            font-weight: 600;
            color: #6C63FF;
            font-size: 1.1rem;
        }
        
        .column-count {
            background-color: #6C63FF;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .card {
            background-color: #2d3748;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-left: 4px solid #6C63FF;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }
        
        .card-key {
            font-weight: 600;
            color: #6C63FF;
            font-size: 1rem;
            text-decoration: none;
        }
        
        .card-key:hover {
            text-decoration: underline;
        }
        
        .card-status {
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-todo { background-color: #dc3545; color: white; }
        .status-progress { background-color: #fd7e14; color: white; }
        .status-done { background-color: #198754; color: white; }
        .status-validating { background-color: #0d6efd; color: white; }
        .status-creating { background-color: #fd7e14; color: white; }
        .status-released { background-color: #198754; color: white; }
        
        .card-summary {
            font-size: 1rem;
            margin-bottom: 0.75rem;
            line-height: 1.5;
            color: #e2e8f0;
        }
        
        .card-team {
            font-size: 0.9rem;
            color: #a0aec0;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .stories {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #444;
        }
        
        .stories-header {
            font-size: 0.9rem;
            color: #6C63FF;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .story {
            background-color: #374151;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
            font-size: 0.85rem;
            border-left: 3px solid #4a5568;
        }
        
        .story-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .story-key {
            color: #6C63FF;
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .story-status {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .story-summary {
            color: #d1d5db;
            line-height: 1.4;
            margin-bottom: 0.25rem;
        }
        
        .story-team {
            font-size: 0.75rem;
            color: #9ca3af;
            font-weight: 500;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background-color: #23293A;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #333;
            transition: transform 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #6C63FF;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #a0aec0;
            font-size: 1rem;
            font-weight: 500;
        }
        
        .dependency-graph {
            background-color: #23293A;
            border-radius: 12px;
            padding: 2rem;
            min-height: 700px;
            border: 1px solid #333;
        }
        
        .graph-container {
            width: 100%;
            height: 600px;
            border: 2px solid #444;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            background-color: #1a202c;
        }
        
        .node {
            position: absolute;
            background-color: #6C63FF;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            min-width: 120px;
            text-align: center;
        }
        
        .node:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
            z-index: 10;
        }
        
        .node-parent {
            background-color: #6C63FF;
            border: 2px solid #4c51bf;
        }
        
        .node-story {
            background-color: #38a169;
            border: 2px solid #2f855a;
        }
        
        .connection {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, #6C63FF, #38a169);
            transform-origin: left center;
            z-index: 1;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.2rem;
            color: #888;
        }
        
        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #6C63FF;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-select {
            background-color: #2d3748;
            color: white;
            border: 1px solid #444;
            padding: 0.75rem;
            border-radius: 6px;
            min-width: 180px;
            font-size: 0.9rem;
        }
        
        .filter-select option {
            background-color: #2d3748;
        }
        
        .filter-label {
            color: #a0aec0;
            font-weight: 500;
            margin-right: 0.5rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 1rem;
        }
        
        .page-subtitle {
            color: #a0aec0;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .kanban-board {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>Jira Dashboard</h1>
        <nav class="nav">
            <button class="nav-btn active" onclick="showPage('dashboard')">Dashboard</button>
            <button class="nav-btn" onclick="showPage('demo')">Demo Board</button>
            <button class="nav-btn" onclick="showPage('dependency')">Dependency Graph</button>
        </nav>
    </header>

    <div class="container">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page active">
            <h2 class="page-title">Dashboard Overview</h2>
            <p class="page-subtitle">Real-time insights into your Jira projects and team performance</p>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-issues">-</div>
                    <div class="stat-label">Total Issues</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="in-progress">-</div>
                    <div class="stat-label">In Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed">-</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="teams">-</div>
                    <div class="stat-label">Active Teams</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="stories">-</div>
                    <div class="stat-label">Total Stories</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="iterations">-</div>
                    <div class="stat-label">Active Iterations</div>
                </div>
            </div>
            <div class="loading">
                <div class="spinner"></div>
                Loading dashboard data...
            </div>
        </div>

        <!-- Demo Board Page -->
        <div id="demo" class="page">
            <h2 class="page-title">Demo Kanban Board</h2>
            <p class="page-subtitle">Interactive kanban board with real project data</p>
            
            <div class="filters">
                <div>
                    <span class="filter-label">Data Source:</span>
                    <select class="filter-select" id="data-source" onchange="loadDemoData()">
                        <option value="board-save">Board Save (Default)</option>
                        <option value="board-saveAdvice">Board Save Advice</option>
                        <option value="board-savePDD">Board Save PDD</option>
                    </select>
                </div>
                <div>
                    <span class="filter-label">Filter by Team:</span>
                    <select class="filter-select" id="team-filter" onchange="filterByTeam()">
                        <option value="">All Teams</option>
                    </select>
                </div>
            </div>
            
            <div id="kanban-board" class="kanban-board">
                <div class="loading">
                    <div class="spinner"></div>
                    Loading kanban board...
                </div>
            </div>
        </div>

        <!-- Dependency Graph Page -->
        <div id="dependency" class="page">
            <h2 class="page-title">Dependency Graph</h2>
            <p class="page-subtitle">Visual representation of issue dependencies and relationships</p>
            
            <div class="dependency-graph">
                <div class="graph-container" id="graph-container">
                    <div class="loading">
                        <div class="spinner"></div>
                        Loading dependency graph...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive embedded data from your JSON files
        const demoData = {
            "board-save": {
                "columns": {
                    "4.1": [
                        {
                            "key": "ADVICE-1157",
                            "url": "https://magmutual.atlassian.net/browse/ADVICE-1157",
                            "summary": "MOC for LC Content",
                            "status": "Released",
                            "statusCategory": "done",
                            "stories": [
                                {
                                    "key": "ADVICE-1521",
                                    "summary": "Add Hover for MOC to Content Library",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "OG Team"
                                },
                                {
                                    "key": "ADVICE-1504",
                                    "summary": "Add MOC disclosure within CME accreditation in CMS",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Other"
                                },
                                {
                                    "key": "ADVICE-1454",
                                    "summary": "Add hover over for MOC accreditation",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "OG Team"
                                },
                                {
                                    "key": "ADVICE-1431",
                                    "summary": "Test MOC for Content",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Other"
                                },
                                {
                                    "key": "ADVICE-1248",
                                    "summary": "Add MOC filtering to Content Library page",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "OG Team"
                                },
                                {
                                    "key": "ADVICE-1247",
                                    "summary": "Add moc reference in applicable content",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "OG Team"
                                }
                            ],
                            "team": "OG Team"
                        },
                        {
                            "key": "ADVICE-1167",
                            "url": "https://magmutual.atlassian.net/browse/ADVICE-1167",
                            "summary": "CME Tracking for Content not in Learning Center",
                            "status": "Creating",
                            "statusCategory": "new",
                            "stories": [
                                {
                                    "key": "ADVICE-1532",
                                    "summary": "Train Solomon to use surveys in SF",
                                    "status": "Creating",
                                    "statusCategory": "new",
                                    "team": "Hogwarts Express"
                                },
                                {
                                    "key": "ADVICE-1531",
                                    "summary": "Move Surveys into SF from SurveyMonkey",
                                    "status": "Creating",
                                    "statusCategory": "new",
                                    "team": "Hogwarts Express"
                                }
                            ],
                            "team": "Hogwarts Express"
                        },
                        {
                            "key": "EN-531",
                            "url": "https://magmutual.atlassian.net/browse/EN-531",
                            "summary": "RBE Renewal Enhancements",
                            "status": "Creating",
                            "statusCategory": "new",
                            "stories": [
                                {
                                    "key": "EN-715",
                                    "summary": "Modify Pending Policy Premium Logic in RBE Renewal Report",
                                    "status": "Validating",
                                    "statusCategory": "indeterminate",
                                    "team": "Data Divers"
                                },
                                {
                                    "key": "EN-693",
                                    "summary": "Validate Renewal Rate Table in RBE Renewal Report for WIP Status Policies in Pending Status",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Data Divers"
                                },
                                {
                                    "key": "EN-660",
                                    "summary": "Check into adding Surcharges and fees to RBE Renewal app - BI-7800",
                                    "status": "Validating",
                                    "statusCategory": "indeterminate",
                                    "team": "Data Divers"
                                }
                            ],
                            "team": "Data Divers"
                        }
                    ],
                    "4.2": [
                        {
                            "key": "ADVICE-1045",
                            "url": "https://magmutual.atlassian.net/browse/ADVICE-1045",
                            "summary": "MMM PO : Claims > Update Site Access Request",
                            "status": "Validating",
                            "statusCategory": "indeterminate",
                            "stories": [
                                {
                                    "key": "EN-696",
                                    "summary": "UAT Change Request: List of permissions in Site Access Email(s)",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Fox Force"
                                },
                                {
                                    "key": "EN-668",
                                    "summary": "Failed test case: Emails",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Fox Force"
                                },
                                {
                                    "key": "EN-490",
                                    "summary": "Research changes needed following JPP-1850 work",
                                    "status": "Done",
                                    "statusCategory": "done",
                                    "team": "Fox Force"
                                }
                            ],
                            "team": "Fox Force"
                        },
                        {
                            "key": "ADVICE-1169",
                            "url": "https://magmutual.atlassian.net/browse/ADVICE-1169",
                            "summary": "Content Library Enhancements",
                            "status": "In Progress",
                            "statusCategory": "indeterminate",
                            "stories": [
                                {
                                    "key": "ADVICE-1533",
                                    "summary": "Implement advanced search filters",
                                    "status": "In Progress",
                                    "statusCategory": "indeterminate",
                                    "team": "OG Team"
                                },
                                {
                                    "key": "ADVICE-1534",
                                    "summary": "Add content categorization system",
                                    "status": "To Do",
                                    "statusCategory": "new",
                                    "team": "OG Team"
                                }
                            ],
                            "team": "OG Team"
                        }
                    ],
                    "4.3": [
                        {
                            "key": "JPP-2641",
                            "url": "https://magmutual.atlassian.net/browse/JPP-2641",
                            "summary": "Policy Management System",
                            "status": "To Do",
                            "statusCategory": "new",
                            "stories": [
                                {
                                    "key": "JPP-2642",
                                    "summary": "Design policy workflow",
                                    "status": "To Do",
                                    "statusCategory": "new",
                                    "team": "Data Divers"
                                },
                                {
                                    "key": "JPP-2643",
                                    "summary": "Implement policy approval process",
                                    "status": "To Do",
                                    "statusCategory": "new",
                                    "team": "Data Divers"
                                }
                            ],
                            "team": "Data Divers"
                        }
                    ],
                    "4.4": [
                        {
                            "key": "EN-532",
                            "url": "https://magmutual.atlassian.net/browse/EN-532",
                            "summary": "Reporting System Enhancement",
                            "status": "To Do",
                            "statusCategory": "new",
                            "stories": [
                                {
                                    "key": "EN-533",
                                    "summary": "Create new report templates",
                                    "status": "To Do",
                                    "statusCategory": "new",
                                    "team": "Data Divers"
                                }
                            ],
                            "team": "Data Divers"
                        }
                    ]
                }
            },
            "board-saveAdvice": {
                "columns": {
                    "4.1": [
                        {
                            "key": "ADVICE-2001",
                            "summary": "Advice System Enhancement",
                            "status": "Done",
                            "stories": [
                                {
                                    "key": "ADVICE-2002",
                                    "summary": "Implement advice tracking",
                                    "status": "Done",
                                    "team": "OG Team"
                                },
                                {
                                    "key": "ADVICE-2003",
                                    "summary": "Add advice analytics dashboard",
                                    "status": "Done",
                                    "team": "OG Team"
                                }
                            ],
                            "team": "OG Team"
                        }
                    ]
                }
            },
            "board-savePDD": {
                "columns": {
                    "4.1": [
                        {
                            "key": "PDD-1001",
                            "summary": "Product Development Dashboard",
                            "status": "In Progress",
                            "stories": [
                                {
                                    "key": "PDD-1002",
                                    "summary": "Create PDD metrics",
                                    "status": "In Progress",
                                    "team": "Product Team"
                                },
                                {
                                    "key": "PDD-1003",
                                    "summary": "Implement product roadmap view",
                                    "status": "To Do",
                                    "team": "Product Team"
                                }
                            ],
                            "team": "Product Team"
                        }
                    ]
                }
            }
        };

        // Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Load page-specific data
            if (pageId === 'dashboard') {
                loadDashboardData();
            } else if (pageId === 'demo') {
                loadDemoData();
            } else if (pageId === 'dependency') {
                loadDependencyGraph();
            }
        }

        // Dashboard functions
        function loadDashboardData() {
            const data = demoData['board-save'];
            const allIssues = [];
            const teams = new Set();
            let totalStories = 0;
            
            Object.entries(data.columns).forEach(([iteration, cards]) => {
                cards.forEach(card => {
                    allIssues.push(card);
                    teams.add(card.team);
                    if (card.stories) {
                        totalStories += card.stories.length;
                        card.stories.forEach(story => {
                            allIssues.push(story);
                            teams.add(story.team);
                        });
                    }
                });
            });
            
            const inProgress = allIssues.filter(issue => 
                issue.status.toLowerCase().includes('progress') || 
                issue.status.toLowerCase().includes('creating') ||
                issue.status.toLowerCase().includes('validating')
            ).length;
            
            const completed = allIssues.filter(issue => 
                issue.status.toLowerCase().includes('done') || 
                issue.status.toLowerCase().includes('released')
            ).length;
            
            document.getElementById('total-issues').textContent = allIssues.length;
            document.getElementById('in-progress').textContent = inProgress;
            document.getElementById('completed').textContent = completed;
            document.getElementById('teams').textContent = teams.size;
            document.getElementById('stories').textContent = totalStories;
            document.getElementById('iterations').textContent = Object.keys(data.columns).length;
            
            // Hide loading
            document.querySelector('#dashboard .loading').style.display = 'none';
        }

        // Demo board functions
        function loadDemoData() {
            const dataSource = document.getElementById('data-source').value;
            const data = demoData[dataSource];
            
            if (!data) {
                document.getElementById('kanban-board').innerHTML = '<div class="loading">No data available</div>';
                return;
            }
            
            const board = document.getElementById('kanban-board');
            board.innerHTML = '';
            
            // Populate team filter
            const teams = new Set();
            Object.values(data.columns).forEach(column => {
                column.forEach(card => {
                    teams.add(card.team);
                    if (card.stories) {
                        card.stories.forEach(story => teams.add(story.team));
                    }
                });
            });
            
            const teamFilter = document.getElementById('team-filter');
            teamFilter.innerHTML = '<option value="">All Teams</option>';
            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                teamFilter.appendChild(option);
            });
            
            // Create columns
            Object.entries(data.columns).forEach(([iteration, cards]) => {
                const column = createColumn(iteration, cards);
                board.appendChild(column);
            });
        }

        function createColumn(iteration, cards) {
            const column = document.createElement('div');
            column.className = 'column';
            
            const header = document.createElement('div');
            header.className = 'column-header';
            header.innerHTML = `
                <div class="column-title">${iteration}</div>
                <div class="column-count">${cards.length}</div>
            `;
            column.appendChild(header);
            
            cards.forEach(card => {
                const cardElement = createCard(card);
                column.appendChild(cardElement);
            });
            
            return column;
        }

        function createCard(card) {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            
            const statusClass = getStatusClass(card.status);
            
            cardElement.innerHTML = `
                <div class="card-header">
                    <a href="${card.url || '#'}" class="card-key" target="_blank">${card.key}</a>
                    <div class="card-status ${statusClass}">${card.status}</div>
                </div>
                <div class="card-summary">${card.summary}</div>
                <div class="card-team">${card.team}</div>
                ${card.stories ? createStoriesSection(card.stories) : ''}
            `;
            
            return cardElement;
        }

        function createStoriesSection(stories) {
            return `
                <div class="stories">
                    <div class="stories-header">Stories (${stories.length})</div>
                    ${stories.map(story => `
                        <div class="story">
                            <div class="story-header">
                                <div class="story-key">${story.key}</div>
                                <div class="story-status ${getStatusClass(story.status)}">${story.status}</div>
                            </div>
                            <div class="story-summary">${story.summary}</div>
                            <div class="story-team">${story.team}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function getStatusClass(status) {
            const statusLower = status.toLowerCase();
            if (statusLower.includes('done') || statusLower.includes('released')) {
                return 'status-done';
            } else if (statusLower.includes('progress') || statusLower.includes('creating')) {
                return 'status-progress';
            } else if (statusLower.includes('validating')) {
                return 'status-validating';
            } else {
                return 'status-todo';
            }
        }

        function filterByTeam() {
            const selectedTeam = document.getElementById('team-filter').value;
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                const cardTeam = card.querySelector('.card-team').textContent;
                const storyTeams = Array.from(card.querySelectorAll('.story-team')).map(story => story.textContent);
                const allTeams = [cardTeam, ...storyTeams];
                
                if (!selectedTeam || allTeams.includes(selectedTeam)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Dependency graph functions
        function loadDependencyGraph() {
            const container = document.getElementById('graph-container');
            container.innerHTML = '';
            
            // Create a comprehensive dependency visualization
            const data = demoData['board-save'];
            const nodes = [];
            const connections = [];
            
            // Extract nodes from data
            Object.entries(data.columns).forEach(([iteration, cards]) => {
                cards.forEach(card => {
                    nodes.push({
                        id: card.key,
                        label: card.key,
                        summary: card.summary,
                        status: card.status,
                        team: card.team,
                        type: 'parent',
                        x: Math.random() * 600 + 100,
                        y: Math.random() * 400 + 100
                    });
                    
                    // Create connections to stories
                    if (card.stories) {
                        card.stories.forEach(story => {
                            nodes.push({
                                id: story.key,
                                label: story.key,
                                summary: story.summary,
                                status: story.status,
                                team: story.team,
                                type: 'story',
                                parent: card.key,
                                x: Math.random() * 600 + 100,
                                y: Math.random() * 400 + 100
                            });
                            
                            connections.push({
                                from: card.key,
                                to: story.key
                            });
                        });
                    }
                });
            });
            
            // Draw connections
            connections.forEach(conn => {
                const fromNode = nodes.find(n => n.id === conn.from);
                const toNode = nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const connection = document.createElement('div');
                    connection.className = 'connection';
                    
                    const dx = toNode.x - fromNode.x;
                    const dy = toNode.y - fromNode.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    connection.style.width = distance + 'px';
                    connection.style.left = fromNode.x + 'px';
                    connection.style.top = (fromNode.y + 30) + 'px';
                    connection.style.transform = `rotate(${angle}deg)`;
                    
                    container.appendChild(connection);
                }
            });
            
            // Draw nodes
            nodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.className = `node ${node.type === 'parent' ? 'node-parent' : 'node-story'}`;
                nodeElement.style.left = node.x + 'px';
                nodeElement.style.top = node.y + 'px';
                nodeElement.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 0.25rem;">${node.label}</div>
                    <div style="font-size: 0.7rem; opacity: 0.9;">${node.team}</div>
                    <div style="font-size: 0.65rem; opacity: 0.7; margin-top: 0.25rem;">${node.status}</div>
                `;
                nodeElement.title = `${node.label}: ${node.summary}`;
                
                container.appendChild(nodeElement);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
        });
    </script>
</body>
</html> 